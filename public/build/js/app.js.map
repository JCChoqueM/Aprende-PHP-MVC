{"version":3,"sources":["app.js"],"names":["paso","pasoInicial","pasoFinal","cita","id","nombre","fecha","hora","servicios","iniciarApp","mostrarSeccion","tabs","botonesPaginador","paginaAnterior","paginaSiguiente","consultarAPI","idCliente","nombreCliente","seleccionarFecha","seleccionarHora","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","pasoSelector","add","tabAnterior","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","async","url","resultado","fetch","mostrarServicios","json","error","console","log","servicio","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","divServicio","some","agregado","filter","value","dia","Date","getUTCDay","includes","mostrarAlerta","split","mensaje","tipo","elemento","desaparece","alertaPrevia","alerta","setTimeout","resumen","firstChild","removeChild","Object","values","length","headingServicios","contenedorServicio","textoServicio","innerHTML","headingCita","fechaObj","mes","getMonth","getDate","year","getFullYear","fechaFormateada","UTC","toLocaleDateString","weekday","month","day","fechaCita","horaCita","botonReservar","reservarCita","idServicios","map","datos","FormData","append","respuesta","method","body","Swal","fire","icon","title","text","button","then","window","location","reload","formulario","btnAuto","type","setDate","toISOString","inputFecha","inputHora","Array","from","s","contains","click","maxSeleccion","Math","min","cantidad","floor","random","indices","_","i","j","slice","idx"],"mappings":"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","file":"app.js","sourcesContent":["let paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\nconst cita = {\r\n  id: '',\r\n  nombre: '',\r\n  fecha: '',\r\n  hora: '',\r\n  servicios: [],\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  iniciarApp();\r\n  //section - Inicio boton autollenar\r\n  // Agregar botón que solo llena campos (no toca nombre) y selecciona 1-4 servicios al azar\r\n  const formulario = document.querySelector('.tabs');\r\n  if (formulario) {\r\n    const btnAuto = document.createElement('button');\r\n    btnAuto.type = 'button'; // evitar submit\r\n    btnAuto.textContent = 'Autollenar';\r\n    btnAuto.classList.add('boton');\r\n    formulario.appendChild(btnAuto);\r\n\r\n    btnAuto.addEventListener('click', function () {\r\n      // Fecha: siguiente día hábil\r\n      const fecha = new Date();\r\n      fecha.setDate(fecha.getDate() + 1);\r\n      while ([0, 6].includes(fecha.getUTCDay())) {\r\n        fecha.setDate(fecha.getDate() + 1);\r\n      }\r\n      const fechaFormateada = fecha.toISOString().split('T')[0];\r\n      const inputFecha = document.querySelector('#fecha');\r\n      if (inputFecha) {\r\n        inputFecha.value = fechaFormateada;\r\n        cita.fecha = fechaFormateada;\r\n      }\r\n\r\n      // Hora: valor fijo (puedes cambiarlo si quieres aleatorio)\r\n      const inputHora = document.querySelector('#hora');\r\n      if (inputHora) {\r\n        inputHora.value = '14:00';\r\n        cita.hora = '14:00';\r\n      }\r\n\r\n      // Seleccionar entre 1 y 4 servicios al azar\r\n      const servicios = Array.from(document.querySelectorAll('.servicio'));\r\n      if (servicios.length === 0) return;\r\n\r\n      // Deseleccionar cualquiera previamente seleccionado\r\n      servicios.forEach((s) => {\r\n        if (s.classList.contains('seleccionado')) s.click();\r\n      });\r\n\r\n      const maxSeleccion = Math.min(4, servicios.length);\r\n      const cantidad = Math.floor(Math.random() * maxSeleccion) + 1; // 1..maxSeleccion\r\n\r\n      // Generar índices aleatorios únicos\r\n      const indices = servicios.map((_, i) => i);\r\n      // Fisher-Yates shuffle\r\n      for (let i = indices.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [indices[i], indices[j]] = [indices[j], indices[i]];\r\n      }\r\n\r\n      const seleccionados = indices.slice(0, cantidad);\r\n      seleccionados.forEach((idx) => servicios[idx].click());\r\n    });\r\n  }\r\n  //!section - FIN boton autollenar\r\n});\r\n\r\nfunction iniciarApp() {\r\n  mostrarSeccion(); // muestra y oculta las secciones\r\n  tabs(); /* Cambia la seccion cuando se presionen los tabs */\r\n  botonesPaginador(); // Agrega o quita los botones de la paginacion\r\n  paginaAnterior();\r\n  paginaSiguiente();\r\n\r\n  consultarAPI();\r\n  idCliente();\r\n  nombreCliente(); //Añade el nobre del cliente al objeto de cita\r\n  seleccionarFecha(); //Anade la fecha al objeto de cita\r\n  seleccionarHora(); //Anade la hora de la cita en el objeto\r\n  mostrarResumen(); //Muestra el resumen de la cita\r\n}\r\nfunction mostrarSeccion() {\r\n  //Ocultar la seccion anterior\r\n  const seccionAnterior = document.querySelector('.mostrar');\r\n\r\n  if (seccionAnterior) {\r\n    seccionAnterior.classList.remove('mostrar');\r\n  }\r\n  //Seleccionar la seccion con el paso...\r\n  const pasoSelector = `#paso-${paso}`;\r\n  const seccion = document.querySelector(pasoSelector);\r\n  seccion.classList.add('mostrar');\r\n\r\n  //Quita la clase de actual al tab anterior\r\n  const tabAnterior = document.querySelector('.actual');\r\n  if (tabAnterior) {\r\n    tabAnterior.classList.remove('actual');\r\n  }\r\n\r\n  //Resalta el tab actual\r\n  const tab = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n  tab.classList.add('actual');\r\n}\r\n\r\nfunction tabs() {\r\n  const botones = document.querySelectorAll('.tabs button');\r\n  botones.forEach((boton) => {\r\n    boton.addEventListener('click', function (e) {\r\n      paso = parseInt(e.target.dataset.paso);\r\n      mostrarSeccion();\r\n      botonesPaginador();\r\n    });\r\n  });\r\n}\r\n\r\nfunction botonesPaginador() {\r\n  const paginaAnterior = document.querySelector('#anterior');\r\n  const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n  if (paso === 1) {\r\n    paginaAnterior.classList.add('ocultar');\r\n    paginaSiguiente.classList.remove('ocultar');\r\n  } else if (paso === 3) {\r\n    paginaAnterior.classList.remove('ocultar');\r\n    paginaSiguiente.classList.add('ocultar');\r\n    mostrarResumen();\r\n  } else {\r\n    paginaAnterior.classList.remove('ocultar');\r\n    paginaSiguiente.classList.remove('ocultar');\r\n  }\r\n  mostrarSeccion();\r\n}\r\n\r\nfunction paginaAnterior() {\r\n  const paginaAnterior = document.querySelector('#anterior');\r\n  paginaAnterior.addEventListener('click', function () {\r\n    if (paso <= pasoInicial) {\r\n      return;\r\n    }\r\n\r\n    paso--;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n  const paginaSiguiente = document.querySelector('#siguiente');\r\n  paginaSiguiente.addEventListener('click', function () {\r\n    if (paso >= pasoFinal) {\r\n      return;\r\n    }\r\n    paso++;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nasync function consultarAPI() {\r\n  try {\r\n    const url = 'api/servicios';\r\n    const resultado = await fetch(url);\r\n    const servicios = await resultado.json();\r\n    mostrarServicios(servicios);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nfunction mostrarServicios(servicios) {\r\n  servicios.forEach((servicio) => {\r\n    const { id, nombre, precio } = servicio;\r\n\r\n    const nombreServicio = document.createElement('P');\r\n    nombreServicio.classList.add('nombre-servicio');\r\n    nombreServicio.textContent = nombre;\r\n\r\n    const precioServicio = document.createElement('P');\r\n    precioServicio.classList.add('precio-servicio');\r\n    precioServicio.textContent = `$${precio}`;\r\n\r\n    const servicioDiv = document.createElement('DIV');\r\n    servicioDiv.classList.add('servicio');\r\n    servicioDiv.dataset.idServicio = id;\r\n\r\n    servicioDiv.onclick = function () {\r\n      seleccionarServicio(servicio);\r\n    };\r\n\r\n    servicioDiv.appendChild(nombreServicio);\r\n    servicioDiv.appendChild(precioServicio);\r\n\r\n    document.querySelector('#servicios').appendChild(servicioDiv);\r\n  });\r\n}\r\n\r\nfunction seleccionarServicio(servicio) {\r\n  const { id } = servicio;\r\n  const { servicios } = cita;\r\n  //Identificar al servicio seleccionado\r\n  const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n  //Comprobar si el servicio ya esta agregado\r\n  if (servicios.some((agregado) => agregado.id === id)) {\r\n    //Elimina el servicio\r\n    cita.servicios = servicios.filter((agregado) => agregado.id !== id);\r\n    divServicio.classList.remove('seleccionado');\r\n  } else {\r\n    //Agrega el nuevo servicio\r\n    cita.servicios = [...servicios, servicio];\r\n    divServicio.classList.add('seleccionado');\r\n  }\r\n\r\n  /*   console.log(cita); */\r\n}\r\n\r\nfunction idCliente() {\r\n  cita.id = document.querySelector('#id').value;\r\n}\r\n\r\nfunction nombreCliente() {\r\n  cita.nombre = document.querySelector('#nombre').value;\r\n}\r\n\r\nfunction seleccionarFecha() {\r\n  const inputFecha = document.querySelector('#fecha');\r\n  inputFecha.addEventListener('input', function (e) {\r\n    const dia = new Date(e.target.value).getUTCDay();\r\n    if ([0, 6].includes(dia)) {\r\n      e.target.value = '';\r\n      mostrarAlerta('Fines de semana no se aceptan citas', 'error', '#paso-2 p'); //#paso-2 p puede ser\r\n    } else {\r\n      cita.fecha = e.target.value;\r\n    }\r\n  });\r\n}\r\n\r\nfunction seleccionarHora() {\r\n  const inputHora = document.querySelector('#hora');\r\n  inputHora.addEventListener('input', function (e) {\r\n    const horaCita = e.target.value;\r\n    const hora = horaCita.split(':')[0];\r\n    if (hora < 10 || hora > 18) {\r\n      e.target.value = '';\r\n      mostrarAlerta('Hora no disponible', 'error', '#paso-2 p'); //#paso-2 p puede ser\r\n    } else {\r\n      cita.hora = e.target.value;\r\n    }\r\n  });\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo, elemento, desaparece = true) {\r\n  //previene que se creen multiples alertas\r\n  const alertaPrevia = document.querySelector('.alerta');\r\n  if (alertaPrevia) {\r\n    alertaPrevia.remove();\r\n  }\r\n  // Script para crear la alerta\r\n  const alerta = document.createElement('DIV');\r\n  alerta.textContent = mensaje;\r\n  alerta.classList.add('alerta', tipo);\r\n\r\n  const referencia = document.querySelector(elemento);\r\n  referencia.appendChild(alerta);\r\n  if (desaparece) {\r\n    //Eliminar la alerta\r\n    setTimeout(() => {\r\n      alerta.remove();\r\n    }, 2000);\r\n  }\r\n}\r\n\r\nfunction mostrarResumen() {\r\n  const resumen = document.querySelector('.contenido-resumen');\r\n  //Limpiar el Contenido de Resumen\r\n  while (resumen.firstChild) {\r\n    resumen.removeChild(resumen.firstChild);\r\n  }\r\n  if (Object.values(cita).includes('') || cita.servicios.length === 0) {\r\n    mostrarAlerta('Faltan datos de servicios o cita', 'error', '.contenido-resumen', false);\r\n    return;\r\n  }\r\n\r\n  //Formatear el div de resumen\r\n  const { nombre, fecha, hora, servicios } = cita;\r\n\r\n  //Heading para Servicios en Resumen\r\n  const headingServicios = document.createElement('H3');\r\n  headingServicios.textContent = 'Resumen de Servicios';\r\n  resumen.appendChild(headingServicios);\r\n\r\n  //Iterando y mostrando los servicios\r\n  servicios.forEach((servicio) => {\r\n    const { id, nombre, precio } = servicio;\r\n    const contenedorServicio = document.createElement('DIV');\r\n    contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n    const textoServicio = document.createElement('P');\r\n    textoServicio.textContent = nombre;\r\n\r\n    const precioServicio = document.createElement('P');\r\n    precioServicio.innerHTML = `<span>Precio:</span> $${precio}`;\r\n\r\n    contenedorServicio.appendChild(textoServicio);\r\n    contenedorServicio.appendChild(precioServicio);\r\n    resumen.appendChild(contenedorServicio);\r\n  });\r\n\r\n  //Heading para Cita en Resumen\r\n  const headingCita = document.createElement('H3');\r\n  headingCita.textContent = 'Resumen de Cita';\r\n  resumen.appendChild(headingCita);\r\n\r\n  const nombreCliente = document.createElement('P');\r\n  nombreCliente.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n\r\n  //Formatear la fecha en español\r\n  const fechaObj = new Date(fecha);\r\n  const mes = fechaObj.getMonth();\r\n  const dia = fechaObj.getDate() + 2;\r\n  const year = fechaObj.getFullYear();\r\n  const fechaUTC = new Date(Date.UTC(year, mes, dia));\r\n  const opciones = {\r\n    weekday: 'long',\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  };\r\n  const fechaFormateada = fechaUTC.toLocaleDateString('es-ES', opciones);\r\n\r\n  const fechaCita = document.createElement('P');\r\n  fechaCita.innerHTML = `<span>Fecha:</span> ${fechaFormateada}`;\r\n\r\n  const horaCita = document.createElement('P');\r\n  horaCita.innerHTML = `<span>Hora:</span> ${hora} Hrs.`;\r\n\r\n  //Boton para Crear una cita\r\n  const botonReservar = document.createElement('BUTTON');\r\n  botonReservar.classList.add('boton');\r\n  botonReservar.textContent = 'Reservar Cita';\r\n  botonReservar.onclick = reservarCita;\r\n\r\n  resumen.appendChild(nombreCliente);\r\n  resumen.appendChild(fechaCita);\r\n  resumen.appendChild(horaCita);\r\n  resumen.appendChild(botonReservar);\r\n}\r\n\r\nasync function reservarCita() {\r\n  const { nombre, fecha, hora, servicios, id } = cita;\r\n  const idServicios = servicios.map((servicio) => servicio.id);\r\n\r\n  const datos = new FormData();\r\n  datos.append('fecha', fecha);\r\n  datos.append('hora', hora);\r\n  datos.append('usuarios_id', id);\r\n  datos.append('servicios', idServicios);\r\n\r\n  // console.log([...datos]);\r\n  try {\r\n    //Peticion hacia la api\r\n    const url = '/api/citas';\r\n    const respuesta = await fetch(url, {\r\n      method: 'POST',\r\n      body: datos,\r\n    });\r\n\r\n    const resultado = await respuesta.json();\r\n    console.log(resultado.resultado);\r\n\r\n    if (resultado.resultado) {\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Cita Creada',\r\n        text: 'Tu cita fue creada correctamente',\r\n        button: 'Ok',\r\n      }).then(() => {\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 3000);\r\n      });\r\n    }\r\n  } catch (error) {\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar la cita',\r\n    });\r\n  }\r\n\r\n  /*  console.log([...datos]); */\r\n}\r\n"]}