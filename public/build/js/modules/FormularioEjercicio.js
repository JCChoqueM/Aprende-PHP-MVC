import{ResultadoRenderer}from"./ResultadoRenderer.js";import{EjercicioService}from"./EjercicioService.js";import{debounce}from"./debounce.js";export class FormularioEjercicio{constructor(r,e,o=new EjercicioService,i=new ResultadoRenderer(document.getElementById("phpResult"))){this.formulario=r,this.parametrosRuta=e,this.ejercicioService=o,this.renderer=i,this.enviarConRetraso=debounce(()=>this.enviar(),4e3)}async enviar(){try{const r=await this.ejercicioService.enviar(this.parametrosRuta.tema,this.parametrosRuta.ejercicio,this.formulario);this.procesarRespuesta(r)}catch(r){this.manejarError(r)}}procesarRespuesta(r){r.error?this.renderer.mostrarError(r.mensaje):this.renderer.mostrarExito(r.mensaje)}manejarError(r){console.error("Error al enviar ejercicio:",r);const e="NetworkError"===r.name?"Error de conexiÃ³n con el servidor":"Error inesperado al procesar la solicitud";this.renderer.mostrarError(e)}configurarEventos(r){this.configurarEnvioAutomatico(),this.configurarBotonResolver(r),this.configurarSubmit()}configurarEnvioAutomatico(){this.formulario.addEventListener("input",()=>{this.enviarConRetraso()})}configurarBotonResolver(r){r&&r.addEventListener("click",r=>{r.preventDefault(),this.enviar()})}configurarSubmit(){this.formulario.addEventListener("submit",r=>{r.preventDefault(),this.enviar()})}}//# sourceMappingURL=FormularioEjercicio.js.map
