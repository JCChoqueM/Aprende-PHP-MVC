import{debounce}from"./02-debounce.js";export class FormularioEjercicio{constructor(r,e,i,o){if(!o||"function"!=typeof o.render)throw new Error("ResultadoRenderer inválido: no tiene método render()");this.formulario=r,this.parametrosRuta=e,this.ejercicioService=i,this.renderer=o,this.enviarConRetraso=debounce(this.enviar.bind(this),4e3)}async enviar(){try{const r=await this.ejercicioService.enviar(this.parametrosRuta.tema,this.parametrosRuta.ejercicio,this.formulario);this.procesarRespuesta(r)}catch(r){this.manejarError(r)}}procesarRespuesta(r){this.renderer.render(r)}manejarError(r){console.error("Error al enviar ejercicio:",r),this.renderer.render({type:"evaluation",data:{ok:!1,message:"Error al procesar la solicitud"}})}configurarEventos(r){this.configurarEnvioAutomatico(),this.configurarBotonResolver(r),this.configurarSubmit()}configurarEnvioAutomatico(){this.formulario.addEventListener("input",()=>{this.enviarConRetraso()})}configurarBotonResolver(r){r&&r.addEventListener("click",r=>{r.preventDefault(),this.enviar()})}configurarSubmit(){this.formulario.addEventListener("submit",r=>{r.preventDefault(),this.enviar()})}}//# sourceMappingURL=07-FormularioEjercicio.js.map
