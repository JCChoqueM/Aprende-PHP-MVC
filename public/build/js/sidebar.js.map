{"version":3,"sources":["sidebar.js"],"names":["initSidebar","updateStats","updateCacheTime","initSearch","statsElement","document","getElementById","sidebarData","textContent","totalTemas","totalEjercicios","cacheAge","minutes","Math","floor","hours","timeText","cacheTimeElement","toggleTema","element","classList","toggle","ejercicios","nextElementSibling","searchBox","addEventListener","e","filterExercises","target","value","toLowerCase","trim","searchTerm","querySelectorAll","forEach","tema","tituloElement","querySelector","ejerciciosContainer","links","link","remove","style","display","hasVisible","dataset","search","includes","add","refreshCache","currentUrl","window","location","href","split"],"mappings":"AAOA,SAASA,cAELC,cAGAC,kBAGAC,aAIJ,SAASF,cACL,MAAMG,EAAeC,SAASC,eAAe,aACzCF,GAAuC,oBAAhBG,cACvBH,EAAaI,YAAc,GAAGD,YAAYE,sBAAsBF,YAAYG,8BAKpF,SAASR,kBACL,GAA2B,oBAAhBK,YAA6B,OAExC,MAAMI,EAAWJ,YAAYI,SACvBC,EAAUC,KAAKC,MAAMH,EAAW,IAChCI,EAAQF,KAAKC,MAAMF,EAAU,IACnC,IAAII,EAAW,GAGXA,EADAD,EAAQ,EACG,GAAGA,MAAUH,EAAU,MAC3BA,EAAU,EACHA,EAAH,IAEA,qBAGf,MAAMK,EAAmBZ,SAASC,eAAe,aAC7CW,IACAA,EAAiBT,YAAc,UAAUQ,GAKjD,SAASE,WAAWC,GAChBA,EAAQC,UAAUC,OAAO,aACzB,MAAMC,EAAaH,EAAQI,mBACvBD,GACAA,EAAWF,UAAUC,OAAO,aAKpC,SAASlB,aACL,MAAMqB,EAAYnB,SAASC,eAAe,aACrCkB,GAELA,EAAUC,iBAAiB,SAAS,SAASC,GAEzCC,gBADmBD,EAAEE,OAAOC,MAAMC,cAAcC,WAMxD,SAASJ,gBAAgBK,GACP3B,SAAS4B,iBAAiB,SAElCC,QAAQC,IACV,MAAMC,EAAgBD,EAAKE,cAAc,gBACnCC,EAAsBH,EAAKE,cAAc,eACzCE,EAAQD,EAAoBL,iBAAiB,mBAEnD,GAAmB,KAAfD,EAEAO,EAAML,QAAQM,GAAQA,EAAKpB,UAAUqB,OAAO,WAC5CN,EAAKO,MAAMC,QAAU,YAClB,CAEHP,EAAchB,UAAUqB,OAAO,aAC/BH,EAAoBlB,UAAUqB,OAAO,aAErC,IAAIG,GAAa,EACjBL,EAAML,QAAQM,KACGA,EAAKK,QAAQC,QAAUN,EAAKhC,YAAYsB,eAC5CiB,SAASf,IACdQ,EAAKpB,UAAUqB,OAAO,UACtBG,GAAa,GAEbJ,EAAKpB,UAAU4B,IAAI,YAK3Bb,EAAKO,MAAMC,QAAUC,EAAa,QAAU,UAMxD,SAASK,eACL,MAAMC,EAAaC,OAAOC,SAASC,KAAKC,MAAM,KAAK,GACnDH,OAAOC,SAASC,KAAOH,EAAa,mBAxGxC7C,SAASoB,iBAAiB,oBAAoB,WAC1CzB","file":"sidebar.js","sourcesContent":["// sidebar.js\r\n\r\n// Inicializar cuando el DOM esté listo\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    initSidebar();\r\n});\r\n\r\nfunction initSidebar() {\r\n    // Actualizar estadísticas\r\n    updateStats();\r\n    \r\n    // Actualizar información del caché\r\n    updateCacheTime();\r\n    \r\n    // Inicializar búsqueda\r\n    initSearch();\r\n}\r\n\r\n// Actualizar estadísticas en el header\r\nfunction updateStats() {\r\n    const statsElement = document.getElementById('statsText');\r\n    if (statsElement && typeof sidebarData !== 'undefined') {\r\n        statsElement.textContent = `${sidebarData.totalTemas} temas • ${sidebarData.totalEjercicios} ejercicios`;\r\n    }\r\n}\r\n\r\n// Mostrar edad del caché\r\nfunction updateCacheTime() {\r\n    if (typeof sidebarData === 'undefined') return;\r\n    \r\n    const cacheAge = sidebarData.cacheAge;\r\n    const minutes = Math.floor(cacheAge / 60);\r\n    const hours = Math.floor(minutes / 60);\r\n    let timeText = '';\r\n    \r\n    if (hours > 0) {\r\n        timeText = `${hours}h ${minutes % 60}m`;\r\n    } else if (minutes > 0) {\r\n        timeText = `${minutes}m`;\r\n    } else {\r\n        timeText = 'recién actualizado';\r\n    }\r\n    \r\n    const cacheTimeElement = document.getElementById('cacheTime');\r\n    if (cacheTimeElement) {\r\n        cacheTimeElement.textContent = `Caché: ${timeText}`;\r\n    }\r\n}\r\n\r\n// Toggle tema (expandir/colapsar)\r\nfunction toggleTema(element) {\r\n    element.classList.toggle('collapsed');\r\n    const ejercicios = element.nextElementSibling;\r\n    if (ejercicios) {\r\n        ejercicios.classList.toggle('collapsed');\r\n    }\r\n}\r\n\r\n// Inicializar búsqueda en tiempo real\r\nfunction initSearch() {\r\n    const searchBox = document.getElementById('searchBox');\r\n    if (!searchBox) return;\r\n    \r\n    searchBox.addEventListener('input', function(e) {\r\n        const searchTerm = e.target.value.toLowerCase().trim();\r\n        filterExercises(searchTerm);\r\n    });\r\n}\r\n\r\n// Filtrar ejercicios según término de búsqueda\r\nfunction filterExercises(searchTerm) {\r\n    const temas = document.querySelectorAll('.tema');\r\n    \r\n    temas.forEach(tema => {\r\n        const tituloElement = tema.querySelector('.tema-titulo');\r\n        const ejerciciosContainer = tema.querySelector('.ejercicios');\r\n        const links = ejerciciosContainer.querySelectorAll('.ejercicio-link');\r\n        \r\n        if (searchTerm === '') {\r\n            // Restaurar estado original\r\n            links.forEach(link => link.classList.remove('hidden'));\r\n            tema.style.display = 'block';\r\n        } else {\r\n            // Expandir tema para búsqueda\r\n            tituloElement.classList.remove('collapsed');\r\n            ejerciciosContainer.classList.remove('collapsed');\r\n            \r\n            let hasVisible = false;\r\n            links.forEach(link => {\r\n                const text = link.dataset.search || link.textContent.toLowerCase();\r\n                if (text.includes(searchTerm)) {\r\n                    link.classList.remove('hidden');\r\n                    hasVisible = true;\r\n                } else {\r\n                    link.classList.add('hidden');\r\n                }\r\n            });\r\n            \r\n            // Ocultar tema si no tiene ejercicios visibles\r\n            tema.style.display = hasVisible ? 'block' : 'none';\r\n        }\r\n    });\r\n}\r\n\r\n// Refrescar caché\r\nfunction refreshCache() {\r\n    const currentUrl = window.location.href.split('?')[0];\r\n    window.location.href = currentUrl + '?refresh_cache=1';\r\n}"]}