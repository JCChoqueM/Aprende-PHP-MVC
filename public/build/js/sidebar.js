function initSidebar(){updateStats(),updateCacheTime(),initSearch()}function updateStats(){const e=document.getElementById("statsText");e&&"undefined"!=typeof sidebarData&&(e.textContent=`${sidebarData.totalTemas} temas • ${sidebarData.totalEjercicios} ejercicios`)}function updateCacheTime(){if("undefined"==typeof sidebarData||void 0===sidebarData.cacheAge)return;const e=sidebarData.cacheAge,t=Math.floor(e/60),a=Math.floor(t/60);let s="recién actualizado";a>0?s=`${a}h ${t%60}m`:t>0&&(s=`${t}m`);const o=document.getElementById("cacheTime");o&&(o.textContent=`Caché: ${s}`)}function toggleTema(e){const t=e.nextElementSibling,a=e.closest(".tema");if(e.classList.toggle("collapsed"),t?.classList.toggle("collapsed"),a){const t=a.dataset.tema,s=e.classList.contains("collapsed");localStorage.setItem(`tema-${t}`,s)}}function restoreTemaStates(){document.querySelectorAll(".tema").forEach(e=>{const t=e.dataset.tema,a="true"===localStorage.getItem(`tema-${t}`),s=e.querySelector(".tema-titulo"),o=e.querySelector(".ejercicios");s&&o&&(a?(s.classList.add("collapsed"),o.classList.add("collapsed")):(s.classList.remove("collapsed"),o.classList.remove("collapsed")))});const e=document.querySelector(".ejercicio-link.active");if(e){const t=e.closest(".tema"),a=t?.querySelector(".tema-titulo"),s=t?.querySelector(".ejercicios");a?.classList.remove("collapsed"),s?.classList.remove("collapsed")}}function initSearch(){const e=document.getElementById("searchBox");e&&e.addEventListener("input",function(e){filterExercises(e.target.value.toLowerCase().trim())})}function filterExercises(e){document.querySelectorAll(".tema").forEach(t=>{const a=t.querySelector(".tema-titulo"),s=t.querySelector(".ejercicios"),o=s.querySelectorAll(".ejercicio-link");if(""===e)return o.forEach(e=>e.classList.remove("hidden")),t.style.display="block",void restoreTemaStates();a.classList.remove("collapsed"),s.classList.remove("collapsed");let c=!1;o.forEach(t=>{const a=(t.dataset.search||t.textContent.toLowerCase()).includes(e);t.classList.toggle("hidden",!a),a&&(c=!0)}),t.style.display=c?"block":"none"})}function refreshCache(){const e=window.location.href.split("?")[0];window.location.href=`${e}?refresh_cache=1`}function toggleSidebar(){document.getElementById("sidebar")?.classList.toggle("active"),document.getElementById("sidebarOverlay")?.classList.toggle("active")}function closeSidebar(){document.getElementById("sidebar")?.classList.remove("active"),document.getElementById("sidebarOverlay")?.classList.remove("active")}function toggleIndexCollapse(){const e=document.getElementById("sidebar");e&&(e.classList.toggle("collapsed"),localStorage.setItem("indexCollapsed",e.classList.contains("collapsed")))}function restoreIndexCollapseState(){const e=document.getElementById("sidebar");"true"===localStorage.getItem("indexCollapsed")&&e?.classList.add("collapsed")}function initSidebarEvents(){document.addEventListener("keydown",e=>{"Escape"===e.key&&closeSidebar()})}document.addEventListener("DOMContentLoaded",function(){initSidebar(),restoreTemaStates(),restoreIndexCollapseState(),initSidebarEvents()});//# sourceMappingURL=sidebar.js.map
